<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Heart Attack Risk Form</title>
      <style>
          body {
              font-family: Arial, sans-serif;
              padding: 20px;
          }
          h1, h2, h3 {
              color: navy;
          }
          p {
              color: #555;
          }
          img {
              max-width: 25%;
              height: auto;
              float: right;
              margin-left: 20px;
          }
          .buttonstyle {
              background-color: lightslategray; /* Change the button background color */
              border-color: lightslategray; /* Change the button border color */
              color: white; /* Change the text color */
          }
      </style>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
</head>
<body style="background-color:#f5f5f5;">
  <h1>Welcome to the Heart Attack Risk Estimator!</h1>
      <img src="https://healthjade.net/wp-content/uploads/2017/08/heart-attack.jpg" alt="Heart Attack Image">
      <p>Please fill out the following form to see if you're at risk of getting a heart attack.</p>
<div class="container mt-5">
  <h2>Heart Attack Risk Form</h2>
  <form id="riskForm">
    <div class="form-row">
      <div class="form-group col-md-3">
        <label for="gender">Gender *</label>
        <select id="gender" class="form-control" required>
          <option value="" disabled selected>Select gender</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
      </div>
      <div class="form-group col-md-3">
        <label for="currentAge">Current Age *</label>
        <input type="number" class="form-control" id="currentAge" placeholder="Enter age" min="20" max="80" required>
      </div>
      <div class="form-group col-md-3">
        <label for="totalCholesterol">Total Cholesterol (mg/dL) *</label>
        <input type="number" class="form-control" id="totalCholesterol" placeholder="Enter total cholesterol" min="120" max="300" required>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-3">
        <label for="diabetes">History of Diabetes? *</label>
        <select id="diabetes" class="form-control" required>
          <option value="" disabled selected>Select Y/N</option>
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
      </div>
      <div class="form-group col-md-3">
        <label for="smoker">Are you a current smoker? *</label>
        <select id="smoker" class="form-control" required>
          <option value="" disabled selected>Select Y/N</option>
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
      </div>
      <div class="form-group col-md-3">
        <label for="stressLevel">Rate your stress level. *</label>
        <input type="number" class="form-control" id="stressLevel" placeholder="Enter your stress level" min="1" max="10">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-3">
        <label for="alcohol">Consume alcohol regularly? *</label>
        <select id="alcohol" class="form-control" required>
          <option value="" disabled selected>Select Y/N</option>
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
      </div>
      <div class="form-group col-md-3">
        <label for="excercise">Exercise hours per week? *</label>
        <input type="number" class="form-control" id="totalExcercise" placeholder="Enter total hours" min="0" max="20" required>     </div>
      <div class="form-group col-md-3">
        <label for="sleep">Sleep hours per day? *</label>
        <input type="number" class="form-control" id="totalSleep" placeholder="Enter total hours" min="4" max="10" required>
      </div>
    </div>
    <!-- <div class="form-group">
      <label>History of Diabetes? *</label>
      <div class="form-check">
        <input class="form-check-input" type="radio" name="diabetesHistory" id="diabetesYes" value="yes" required>
        <label class="form-check-label" for="diabetesYes">Yes</label>
      </div> -->
      <!-- <div class="form-check">
        <input class="form-check-input" type="radio" name="diabetesHistory" id="diabetesNo" value="no" required>
        <label class="form-check-label" for="diabetesNo">No</label>
      </div>
    </div> -->
    <!-- Repeat the above structure for other binary questions like Smoker, On Hypertension Treatment, etc. -->
    <!-- ... other form fields ... -->
    <button type="submit" class="buttonstyle" onclick="submitForm(event)">Submit</button>
  </form>
</div>
<h3> <strong> DISCLAIMER </strong> </h3>
      <p> The heart attack risk calculator provided by our app evaluates individualized data 
        to estimate future risks of heart attack. This tool is intended for informational purposes only and should not replace professional medical advice or diagnosis. 
        It is designed to assist users in understanding potential cardiovascular risks and exploring preventive measures. </p>
<!-- <script>
  var formDataList = []; // Initialize empty array to store form data

  function storeFormData() {
    // Get form data
    var formData = {
      gender: document.getElementById('gender').value,
      currentAge: document.getElementById('currentAge').value,
      totalCholesterol: document.getElementById('totalCholesterol').value,
      diabetes: document.getElementById('diabetes').value,
      smoker: document.getElementById('smoker').value,
      stressLevel: document.getElementById('stressLevel').value
    };

    // Push form data into array
    formDataList.push(formData);

    // Log a message to indicate that the function is called
    console.log('Form data stored:', formDataList);
  }

  function submitForm(event) {
    // Prevent default form submission
    event.preventDefault();

    // Call storeFormData() to capture form data
    storeFormData();

    // Optionally, you can submit the form programmatically
    // document.getElementById('riskForm').submit();
  }
</script> -->
<script>

  function runPyScript(input){
        var prediction = $.ajax({
            type: "POST",
            url: "http://localhost:5000/askModel",
            async: false,
            contentType: "application/json",
            data: input
        });

        return prediction.responseText;
  }

  var formDataList = []; // Initialize empty array to store form data

  function storeFormData() {
    // Get form data
    var formData = {
      "Sex": document.getElementById('gender').value,
      "Age": document.getElementById('currentAge').value,
      "Cholesterol": document.getElementById('totalCholesterol').value,
      "Heart Rate": 70,
      "Diabetes": document.getElementById('diabetes').value,
      "Family History": 0,
      "Smoking": document.getElementById('smoker').value,
      "Obesity": 0,
      "Stress Level": document.getElementById('stressLevel').value,
      "Alcohol Consumption": document.getElementById('alcohol').value,
      "Exercise Hours Per Week": document.getElementById('totalExcercise').value,
      "Sleep Hours Per Day": document.getElementById('totalSleep').value,
      "Diet": "Average",
      "Previous Heart Problems": 0,
      "Medication Use": 0,
      "Sedentary Hours Per Day": 3,
      "Income": 60000,
      "BMI": 20,
      "Triglycerides": 150,
      "Physical Activity Days Per Week": 3,
      "Country": "United States",
      "Continent": "North America",
      "Hemisphere": "Northern Hemisphere"
      
    };

    // Push form data into array
    formDataList.push(formData);
    var formJson = JSON.stringify(formData);
    console.log('Form json stored:', formJson);
    result = runPyScript(formJson);
    console.log('Got back ' + result);

    // Log a message to indicate that the function is called
    console.log('Form data stored:', formDataList);
  }

  function submitForm(event) {
    // Prevent default form submission
    event.preventDefault();

    // Call storeFormData() to capture form data
    storeFormData();

    // // Optionally, you can submit the form programmatically
    // document.getElementById('riskForm').submit();

    // // Reset the form
    document.getElementById("riskForm").reset();
  }

</script>
<!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script> -->
</body>
</html>